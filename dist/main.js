(()=>{"use strict";const e="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.21.2/min",t=document.getElementById("language"),n=document.getElementById("theme"),o=document.getElementById("insert"),a=document.getElementById("close"),d=new URLSearchParams(window.location.search),r=decodeURIComponent(d.get("text")||""),i=d.get("origin")||"*",c=d.get("theme");function s(e){window.parent.postMessage(e,i)}a.addEventListener("click",(()=>{s({type:"editor.close"})})),document.body.addEventListener("click",(e=>{e.target===e.currentTarget&&a.click()})),async function(){var t,n;return await(t=`${e}/vs/loader.min.js`,new Promise(((e,n)=>{const o=document.createElement("script");o.src=t,o.onload=e,o.onerror=n,document.body.appendChild(o)}))),require.config({paths:{vs:`${e}/vs`}}),window.MonacoEnvironment={getWorkerUrl:function(t,n){return`data:text/javascript;charset=utf-8,${encodeURIComponent(`\n        self.MonacoEnvironment = {\n          baseUrl: '${e}'\n        };\n        importScripts('${e}/vs/base/worker/workerMain.js');`)}`}},await(n=["vs/editor/editor.main"],new Promise((e=>require(n,e)))),window.monaco}().then((e=>{const a=e.editor.create(document.getElementById("editor"),{value:r,language:t.value,...c?{theme:c}:null});t.disabled=!1,n.disabled=!1,n.value=c||n.value,o.disabled=!1,t.addEventListener("change",(()=>{e.editor.setModelLanguage(a.getModel(),t.value)})),n.addEventListener("change",(()=>{e.editor.setTheme(n.value),s({type:"editor.theme",theme:n.value})})),o.addEventListener("click",(()=>{s({type:"editor.insert",value:a.getValue(),syntax:t.value})})),window._editor=a})),window.parent===window&&function(){const e=document.getElementById("code");fetch("./dist/bookmarklet.js").then((e=>e.text())).then((t=>{e.textContent=`javascript:(function(){${encodeURIComponent(t)}})()`,document.body.classList.add("show-sections")})).catch(console.error)}()})();