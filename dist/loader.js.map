{"version":3,"sources":["webpack:///./loader.js"],"names":["window","_createEditorIframe","activeElement","document","selectionStart","selectionEnd","value","text","getSelection","toString","iframe","createElement","params","URLSearchParams","destroy","body","removeChild","removeEventListener","handleMessage","event","data","type","slice","syntax","localStorage","setItem","theme","setTheme","append","encodeURIComponent","location","origin","getItem","src","Object","assign","style","position","width","height","top","left","zIndex","appendChild","addEventListener"],"mappings":"AAAAA,OAAOC,oBAAsB,WAC3B,MAAM,cAAEC,GAAkBC,UACpB,eAAEC,EAAc,aAAEC,EAAY,MAAEC,GAAUJ,GAAiB,GAC3DK,EAAOP,OAAOQ,eAAeC,WAC7BC,EAASP,SAASQ,cAAc,UAChCC,EAAS,IAAIC,gBAEnB,SAASC,IACPX,SAASY,KAAKC,YAAYN,GAC1BV,OAAOiB,oBAAoB,UAAWC,GAiBxC,SAASA,EAAeC,GACtB,OAAQA,EAAMC,KAAKC,MACjB,IAAK,eACHP,IACA,MAEF,IAAK,gBACHA,IAEIZ,IAvBOkB,EAwBFD,EAAMC,KAvBnBlB,EAAcI,MACZA,EAAMgB,MAAM,EAAGlB,GACf,MAAQgB,EAAKG,OAAS,KACtBH,EAAKd,MACL,UACAA,EAAMgB,MAAMjB,IAqBV,MAEF,IAAK,gBAnBT,SAAmBe,GACjBI,aAAaC,QAAQ,eAAgBL,EAAKM,OAmBtCC,CAASR,EAAMC,MA9BrB,IAAiBA,EAmCjBR,EAAOgB,OAAO,OAAQC,mBAAmBtB,IACzCK,EAAOgB,OAAO,SAAU5B,OAAO8B,SAASC,QACxCnB,EAAOgB,OAAO,QAASJ,aAAaQ,QAAQ,iBAAmB,IAC/DtB,EAAOuB,IAAM,gEAA2BrB,EAAOH,WAE/CyB,OAAOC,OAAOzB,EAAO0B,MAAO,CAC1BC,SAAU,QACVC,MAAO,QACPC,OAAQ,QACRC,IAAK,IACLC,KAAM,IACNC,OAAQ,SAGVvC,SAASY,KAAK4B,YAAYjC,GAC1BV,OAAO4C,iBAAiB,UAAW1B","file":"loader.js","sourcesContent":["window._createEditorIframe = function createEditorIframe () {\n  const { activeElement } = document\n  const { selectionStart, selectionEnd, value } = activeElement || {}\n  const text = window.getSelection().toString()\n  const iframe = document.createElement('iframe')\n  const params = new URLSearchParams()\n\n  function destroy () {\n    document.body.removeChild(iframe)\n    window.removeEventListener('message', handleMessage)\n  }\n\n  function insert (data) {\n    activeElement.value = (\n      value.slice(0, selectionStart) +\n      '```' + data.syntax + '\\n' +\n      data.value +\n      '\\n```\\n' +\n      value.slice(selectionEnd)\n    )\n  }\n\n  function setTheme (data) {\n    localStorage.setItem('monaco-theme', data.theme)\n  }\n\n  function handleMessage (event) {\n    switch (event.data.type) {\n      case 'editor.close':\n        destroy()\n        break\n\n      case 'editor.insert':\n        destroy()\n\n        if (activeElement) {\n          insert(event.data)\n        }\n\n        break\n\n      case 'editor.theme':\n        setTheme(event.data)\n        break\n    }\n  }\n\n  params.append('text', encodeURIComponent(text))\n  params.append('origin', window.location.origin)\n  params.append('theme', localStorage.getItem('monaco-theme') || '')\n  iframe.src = BASE_URL + 'index.html?' + params.toString()\n\n  Object.assign(iframe.style, {\n    position: 'fixed',\n    width: '100vw',\n    height: '100vh',\n    top: '0',\n    left: '0',\n    zIndex: '1000'\n  })\n\n  document.body.appendChild(iframe)\n  window.addEventListener('message', handleMessage)\n}\n"],"sourceRoot":""}